<div class="d-flex justify-between align-center mb-4">
  <h1>Character Directory</h1>
  <% if(user) { %>
    <a href="/characters/create" class="btn">
      <i class="fas fa-plus"></i> Create Character
    </a>
  <% } %>
</div>

<% if (typeof characters !== 'undefined' && characters.length > 0) { %>
  <div class="row">
    <% characters.forEach(character => { %>
      <div class="col" style="flex: 0 0 33.333333%; margin-bottom: 20px;">
        <div class="character-card">
          <div class="character-image-container">
            <% if (character.avatarUrl) { %>
              <img src="<%= character.avatarUrl %>" alt="<%= character.name %>" class="character-image">
            <% } else { %>
              <div class="character-avatar-placeholder">
                <%= character.name.charAt(0).toUpperCase() %>
              </div>
            <% } %>
          </div>
          
          <div class="character-info">
            <h4 class="character-name"><%= character.name %></h4>
            <% if (character.shortBio) { %>
              <p class="character-bio"><%= character.shortBio %></p>
            <% } %>
            <div class="character-tags">
              <% if (character.gender) { %>
                <span class="character-tag"><%= character.gender %></span>
              <% } %>
              <% if (character.User) { %>
                <span class="character-tag">by <%= character.User.username %></span>
              <% } %>
            </div>
            <div class="mt-2">
              <a href="/characters/<%= character.id %>" class="btn btn-sm">View Profile</a>
            </div>
          </div>
        </div>
      </div>
    <% }); %>
  </div>
<% } else { %>
    <div class="col">
      <div class="card">
        <div class="card-body text-center">
          <p>No characters have been created yet.</p>
          <% if(user) { %>
            <a href="/characters/create" class="btn">Create the First Character</a>
          <% } else { %>
            <a href="/auth/login" class="btn">Login to Create Characters</a>
          <% } %>
        </div>
      </div>
    </div>
  <% } %>
</div>